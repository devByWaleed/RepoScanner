let inputSection=document.getElementById("input-card"),githubURL=document.getElementById("github-url"),branchSelect=document.getElementById("select-branch"),otherBranch=document.getElementById("custom-branch"),fetchBtn=document.getElementById("fetchBtn"),outputSection=document.getElementById("output-card"),searchBar=document.getElementById("search"),detailCont=document.getElementById("details"),output=document.getElementById("result"),urlSection=document.querySelector("#overlay"),copyBtn=document.getElementById("copy-btn");function getSelectedValue(){return"other"===branchSelect.value?otherBranch.value:branchSelect.value}otherBranch.style.display="none",outputSection.style.display="none",urlSection.style.display="none",branchSelect.addEventListener("change",function(){"other"===this.value?(otherBranch.style.display="inline-block",otherBranch.focus()):(otherBranch.style.display="none",otherBranch.value="")});let searchArray=[],userName="",repoName="",branchName="";const fetchData=async()=>{const e=githubURL.value.trim();if(!e)return void alert("Please enter a GitHub repo URL!");let t=e.split("/");console.log(t);let n=t[t.length-2],r=t[t.length-1],o=getSelectedValue();userName=n,repoName=r,branchName=o,inputSection.style.display="none",outputSection.style.display="flex",detailCont.innerHTML+=`\n        <p style="color: #172554;">${userName}</p>\n        <p style="color: #172554;">${repoName}</p>\n    `,output.innerHTML='<p style="color: white;>‚è≥ Fetching files...</p>';try{const e=await fetch(`https://api.github.com/repos/${userName}/${repoName}/git/trees/${branchName}?recursive=1`),t=await e.json();if(!t.tree)return void(output.innerHTML='<p style="color: white;>‚ö†Ô∏è Could not fetch files. Check repo URL or branch name.</p>');searchArray=t.tree,output.innerHTML="";for(let e=0;e<searchArray.length;e++){let t=searchArray[e].path;output.innerHTML+=`\n                <p style="color: white;">\n                    <button \n                    style="background: none; border: none; cursor: pointer; font-size: 20px;"\n                    onclick="getURL('${t}')">üîó</button> \n                    ${t}\n                </p>\n            `}}catch(e){output.innerHTML="<p>‚ùå Error while fetching data</p>"}};fetchBtn.addEventListener("click",fetchData),searchBar.addEventListener("input",function(){output.innerHTML="";for(let e=0;e<searchArray.length;e++){let t=searchArray[e].path;t.toLowerCase().includes(searchBar.value.toLowerCase())&&(output.innerHTML+=`\n                <p style="color: white;">\n                    <button \n                    style="background: none; border: none; cursor: pointer; font-size: 20px;"\n                    onclick="getURL('${t}')">üîó</button> \n                    ${t}\n                </p>\n                `)}});const getURL=e=>{urlSection.style.display="flex",correctPath=e.replaceAll(" ","%20"),console.log(`Original Path: ${e}`),console.log(`Handling Space: ${correctPath}`);let t=`https://github.com/${userName}/${repoName}/blob/${branchName}/${correctPath}`;console.log(`Full URL: ${t}`),urlSection.innerHTML+=`\n        <div class="url">\n            <i class="bi bi-x-square" id="close-icon" \n            style="position: fixed; right: 10px; top: 10px; cursor: pointer;"></i>\n            <h2>Full Path</h2>\n            <div class="path-detail">\n                <p class="url-animate">\n                https://github.com/${userName}/${repoName}/blob/${branchName}/${correctPath}\n                </p>\n                <button ><i class="bi bi-copy"></i></button>\n            </div>\n        </div>\n    `};